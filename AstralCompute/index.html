<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>AstralCompute - √âph√©m√©rides Astrologiques</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-title">
            <h1 data-en="AstralCompute - Astrological Ephemeris" data-fr="AstralCompute - √âph√©m√©rides Astrologiques">AstralCompute - √âph√©m√©rides Astrologiques</h1>
            <p data-en="Calculate planetary positions and astrological aspects" data-fr="Calculez les positions plan√©taires et aspects astrologiques">Calculez les positions plan√©taires et aspects astrologiques</p>
        </div>
        <div class="header-controls">
            <button class="settings-btn" onclick="openSettings()" data-en="‚öô" data-fr="‚öô" title="Settings">‚öô</button>
        </div>
        <div class="credits">
            <span>CraftKontrol 2025</span>
            <div class="last-modified">
                <span id="lastModified">Loading...</span>
            </div>
        </div>
    </header>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-en="User Settings" data-fr="Param√®tres Utilisateur">Param√®tres Utilisateur</h2>
                <button class="modal-close" onclick="closeSettings()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="languageSelect" data-en="Language:" data-fr="Langue :">Langue :</label>
                    <select id="languageSelect" onchange="changeLanguage()">
                        <option value="fr">Fran√ßais</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="userName" data-en="Your Name:" data-fr="Votre Nom :">Votre Nom :</label>
                    <input type="text" id="userName" placeholder="" data-placeholder-en="Enter your name..." data-placeholder-fr="Entrez votre nom..." />
                </div>
                <div class="input-group">
                    <label for="userBirthDate" data-en="Date of Birth:" data-fr="Date de Naissance :">Date de Naissance :</label>
                    <input type="date" id="userBirthDate" />
                </div>
                <div class="input-group">
                    <label for="userBirthTime" data-en="Birth Time (optional):" data-fr="Heure de Naissance (optionnel) :">Heure de Naissance (optionnel) :</label>
                    <input type="time" id="userBirthTime" />
                </div>
                <div class="user-info-display" id="userInfoDisplay" style="display: none;">
                    <p><strong data-en="Saved Profile:" data-fr="Profil Enregistr√© :">Profil Enregistr√© :</strong></p>
                    <p id="savedUserInfo"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="clearUserSettings()" data-en="Clear Profile" data-fr="Effacer le Profil">Effacer le Profil</button>
                <button class="btn-primary" onclick="saveUserSettings()" data-en="Save Settings" data-fr="Enregistrer">Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- Mistral API Key Section -->
    <section class="api-key-section" id="apiKeySection">
        <label for="apiKey" data-en="Mistral API Key (for interpretation):" data-fr="Cl√© API Mistral (pour l'interpr√©tation) :">Cl√© API Mistral (pour l'interpr√©tation) :</label>
        <input type="password" id="apiKey" placeholder="Entrez votre cl√© API Mistral..." data-placeholder-en="Enter your Mistral API key..." data-placeholder-fr="Entrez votre cl√© API Mistral..." />
        <div class="api-key-controls">
            <label class="remember-key-label">
                <input type="checkbox" id="rememberKey" />
                <span data-en="Remember API Key" data-fr="M√©moriser la cl√© API">M√©moriser la cl√© API</span>
            </label>
            <button class="clear-key-button" id="clearKeyBtn" onclick="clearSavedApiKey()" data-en="Clear Saved Key" data-fr="Effacer la cl√©">Effacer la cl√©</button>
        </div>
        <span class="saved-key-indicator" id="savedKeyIndicator" data-en="‚úì Using saved key" data-fr="‚úì Cl√© sauvegard√©e utilis√©e">‚úì Cl√© sauvegard√©e utilis√©e</span>
        <span class="hint" data-en="Get your API key from " data-fr="Obtenez votre cl√© API sur ">Obtenez votre cl√© API sur <a href="https://console.mistral.ai/" target="_blank">Mistral AI Console</a></span>
    </section>

    <div class="security-notice" id="securityNotice">
        <p><strong>üîí <span data-en="Security Notice:" data-fr="Notice de s√©curit√© :">Notice de s√©curit√© :</span></strong> <span data-en="Your API key is stored locally in your browser's localStorage." data-fr="Votre cl√© API est stock√©e localement dans le localStorage de votre navigateur.">Votre cl√© API est stock√©e localement dans le localStorage de votre navigateur.</span></p>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div id="errorMessage" class="error-message" style="display: none;"></div>
        
        <div id="loadingIndicator" class="loading-indicator" style="display: none;">
            <div class="spinner"></div>
            <p data-en="Loading..." data-fr="Chargement...">Chargement...</p>
        </div>

        <!-- Controls Section -->
        <section class="controls-section">
            <div class="control-group">
                <div class="input-group">
                    <label for="dateInput" data-en="Date:" data-fr="Date :">Date :</label>
                    <input type="date" id="dateInput" />
                </div>
                <div class="input-group">
                    <label for="timeInput" data-en="Time (UTC):" data-fr="Heure (UTC) :">Heure (UTC) :</label>
                    <input type="time" id="timeInput" value="12:00" />
                </div>
            </div>
            <div class="button-group">
                <button class="btn-primary" id="dailyButton" onclick="generateDailyHoroscope()" data-en="My daily horoscope" data-fr="Mon horoscope du jour">Mon horoscope du jour</button>
                <button class="btn-secondary" id="themeButton" onclick="generateAstralTheme()" data-en="Generate full chart + AI" data-fr="Faire un th√®me astral">Faire un th√®me astral</button>
                <button class="btn-secondary" id="numerologyButton" onclick="generateNumerologyProfile()" data-en="Generate numerology profile" data-fr="Faire un profil num√©rologique">Faire un profil num√©rologique</button>
            </div>
        </section>

        <!-- Results Container -->
        <div id="resultsContainer" style="display: none;">
            <div id="astroResults">
                <!-- Interpretation first -->
                <section class="data-section">
                    <h2 data-en="AI Interpretation" data-fr="Interpr√©tation IA">Interpr√©tation IA</h2>
                    <div class="legend">
                        <span data-en="Astrological interpretation powered by Mistral AI" data-fr="Interpr√©tation astrologique propuls√©e par Mistral IA">Interpr√©tation astrologique propuls√©e par Mistral IA</span>
                    </div>
                    <button class="btn-primary" id="interpretBtn" onclick="getInterpretation()" data-en="Generate Interpretation" data-fr="G√©n√©rer l'interpr√©tation">G√©n√©rer l'interpr√©tation</button>
                    <div id="interpretation" class="interpretation-display"></div>
                </section>

                <!-- Two Column Layout -->
                <div class="data-grid">
                    
                    <!-- Left Column -->
                    <div class="data-column">
                        <!-- Moon Phase -->
                        <section class="data-section">
                            <h2 data-en="Moon Phase" data-fr="Phase Lunaire">Phase Lunaire</h2>
                            <div class="legend">
                                <span data-en="Current lunar phase and illumination" data-fr="Phase lunaire actuelle et illumination">Phase lunaire actuelle et illumination</span>
                            </div>
                            <div id="moonPhase" class="moon-phase-display"></div>
                        </section>


                        <!-- Planetary Positions -->
                        <section class="data-section">
                            <h2 data-en="Planetary Positions" data-fr="Positions Plan√©taires">Positions Plan√©taires</h2>
                            <div class="legend">
                                <span data-en="Position in zodiac sign with degrees and minutes" data-fr="Position dans le signe du zodiaque avec degr√©s et minutes">Position dans le signe du zodiaque avec degr√©s et minutes</span>
                                <span class="retrograde-legend">‚ìá = <span data-en="Retrograde" data-fr="R√©trograde">R√©trograde</span></span>
                            </div>
                            <div id="planetaryPositions" class="positions-list"></div>
                        </section>

                    </div>

                    <!-- Right Column -->
                    <div class="data-column">
                        
                        <!-- Aspects -->
                        <section class="data-section">
                            <h2 data-en="Planetary Aspects" data-fr="Aspects Plan√©taires">Aspects Plan√©taires</h2>
                            <div class="legend">
                                <span data-en="Major aspects between planets (¬±8¬∞ orb)" data-fr="Aspects majeurs entre plan√®tes (¬±8¬∞ d'orbe)">Aspects majeurs entre plan√®tes (¬±8¬∞ d'orbe)</span>
                            </div>
                            <div id="aspectsList" class="aspects-list"></div>
                        </section>

                    </div>

                </div>
                <!-- Astrological Chart -->
                <section class="chart-section">
                    <h2 data-en="Astrological Chart" data-fr="Carte Astrologique">Carte Astrologique</h2>
                    <div class="legend">
                        <span data-en="Planets positioned in zodiac wheel with aspects" data-fr="Plan√®tes positionn√©es dans la roue du zodiaque avec aspects">Plan√®tes positionn√©es dans la roue du zodiaque avec aspects</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="astroChart" width="600" height="600"></canvas>
                    </div>
                    <div class="chart-legend">
                        <div class="legend-section">
                            <h4 data-en="Planets" data-fr="Plan√®tes">Plan√®tes</h4>
                            <div class="legend-items">
                                <span>‚òâ <span data-en="Sun" data-fr="Soleil">Soleil</span></span>
                                <span>‚òΩ <span data-en="Moon" data-fr="Lune">Lune</span></span>
                                <span>‚òø <span data-en="Mercury" data-fr="Mercure">Mercure</span></span>
                                <span>‚ôÄ <span data-en="Venus" data-fr="V√©nus">V√©nus</span></span>
                                <span>‚ôÇ <span data-en="Mars" data-fr="Mars">Mars</span></span>
                                <span>‚ôÉ <span data-en="Jupiter" data-fr="Jupiter">Jupiter</span></span>
                                <span>‚ôÑ <span data-en="Saturn" data-fr="Saturne">Saturne</span></span>
                                <span>‚ôÖ <span data-en="Uranus" data-fr="Uranus">Uranus</span></span>
                                <span>‚ôÜ <span data-en="Neptune" data-fr="Neptune">Neptune</span></span>
                                <span>‚ôá <span data-en="Pluto" data-fr="Pluton">Pluton</span></span>
                            </div>
                        </div>
                        <div class="legend-section">
                            <h4 data-en="Zodiac Signs" data-fr="Signes du Zodiaque">Signes du Zodiaque</h4>
                            <div class="legend-items">
                                <span>‚ôà <span data-en="Aries" data-fr="B√©lier">B√©lier</span></span>
                                <span>‚ôâ <span data-en="Taurus" data-fr="Taureau">Taureau</span></span>
                                <span>‚ôä <span data-en="Gemini" data-fr="G√©meaux">G√©meaux</span></span>
                                <span>‚ôã <span data-en="Cancer" data-fr="Cancer">Cancer</span></span>
                                <span>‚ôå <span data-en="Leo" data-fr="Lion">Lion</span></span>
                                <span>‚ôç <span data-en="Virgo" data-fr="Vierge">Vierge</span></span>
                                <span>‚ôé <span data-en="Libra" data-fr="Balance">Balance</span></span>
                                <span>‚ôè <span data-en="Scorpio" data-fr="Scorpion">Scorpion</span></span>
                                <span>‚ôê <span data-en="Sagittarius" data-fr="Sagittaire">Sagittaire</span></span>
                                <span>‚ôë <span data-en="Capricorn" data-fr="Capricorne">Capricorne</span></span>
                                <span>‚ôí <span data-en="Aquarius" data-fr="Verseau">Verseau</span></span>
                                <span>‚ôì <span data-en="Pisces" data-fr="Poissons">Poissons</span></span>
                            </div>
                        </div>
                        <div class="legend-section">
                            <h4 data-en="Aspects" data-fr="Aspects">Aspects</h4>
                            <div class="legend-items">
                                <span>‚òå <span data-en="Conjunction" data-fr="Conjonction">Conjonction</span></span>
                                <span>‚òç <span data-en="Opposition" data-fr="Opposition">Opposition</span></span>
                                <span>‚ñ≥ <span data-en="Trine" data-fr="Trigone">Trigone</span></span>
                                <span>‚ñ° <span data-en="Square" data-fr="Carr√©">Carr√©</span></span>
                                <span>‚öπ <span data-en="Sextile" data-fr="Sextile">Sextile</span></span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <div id="numerologyResults" style="display: none;">
                <!-- Interpretation first -->
                <section class="data-section">
                    <h2 data-en="Numerology Interpretation" data-fr="Interpr√©tation Num√©rologique">Interpr√©tation Num√©rologique</h2>
                    <div class="legend">
                        <span data-en="Numerology interpretation powered by Mistral AI" data-fr="Interpr√©tation num√©rologique propuls√©e par Mistral IA">Interpr√©tation num√©rologique propuls√©e par Mistral IA</span>
                    </div>
                    <div id="numerologyInterpretation" class="interpretation-display"></div>
                </section>

                <section class="data-section">
                    <h2 data-en="Numerology Profile" data-fr="Profil Num√©rologique">Profil Num√©rologique</h2>
                    <div class="legend">
                        <span data-en="Core numbers derived from the selected date (and name if provided)" data-fr="Nombres clefs d√©riv√©s de la date s√©lectionn√©e (et du nom si renseign√©)">Nombres clefs d√©riv√©s de la date s√©lectionn√©e (et du nom si renseign√©)</span>
                    </div>
                    <div class="numerology-grid">
                        <div class="num-card">
                            <div class="num-label" data-en="Date" data-fr="Date">Date</div>
                            <div class="num-value" id="numDate">‚Äî</div>
                        </div>
                        <div class="num-card">
                            <div class="num-label" data-en="Life Path" data-fr="Chemin de vie">Chemin de vie</div>
                            <div class="num-value" id="numLifePath">‚Äî</div>
                        </div>
                        <div class="num-card">
                            <div class="num-label" data-en="Personal Year" data-fr="Ann√©e personnelle">Ann√©e personnelle</div>
                            <div class="num-value" id="numPersonalYear">‚Äî</div>
                        </div>
                        <div class="num-card">
                            <div class="num-label" data-en="Day" data-fr="Jour">Jour</div>
                            <div class="num-value" id="numDay">‚Äî</div>
                        </div>
                        <div class="num-card">
                            <div class="num-label" data-en="Month" data-fr="Mois">Mois</div>
                            <div class="num-value" id="numMonth">‚Äî</div>
                        </div>
                        <div class="num-card">
                            <div class="num-label" data-en="Year" data-fr="Ann√©e">Ann√©e</div>
                            <div class="num-value" id="numYear">‚Äî</div>
                        </div>
                        <div class="num-card">
                            <div class="num-label" data-en="Expression" data-fr="Expression">Expression</div>
                            <div class="num-value" id="numExpression">‚Äî</div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>Arnaud Cassone ¬© Artcraft Visuals 2025</p>
        <a href="https://www.artcraft-zone.com" target="_blank">www.artcraft-zone.com</a>
    </footer>

    <!-- Swiss Ephemeris Library (using CDN or local copy) -->
    <script src="https://cdn.jsdelivr.net/npm/swisseph@1.80.1/dist/swisseph.min.js"></script>
    <script>document.write('<script src="script.js?v=' + Date.now() + '"><\/script>');</script>
</body>
</html>
